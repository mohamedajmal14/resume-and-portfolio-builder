{"ast":null,"code":"var _jsxFileName = \"D:\\\\project\\\\miniproject\\\\fullstack\\\\src\\\\component\\\\profile\\\\profile.jsx\";\nimport React, { useState } from 'react';\nimport './profile.css'; // Import CSS file for styling\nimport axios from 'axios'; // To handle image upload requests\n\nconst Profile = ({\n  user,\n  setUser\n}) => {\n  const [imageFile, setImageFile] = useState(null); // State to store selected image preview\n  const [loading, setLoading] = useState(false); // State to handle loading status\n  const [error, setError] = useState(null); // State to handle error messages\n  const defaultProfileImage = 'https://www.pphfoundation.ca/wp-content/uploads/2018/05/default-avatar.png';\n\n  // Function to handle image selection and upload\n  const handleImageChange = async e => {\n    const file = e.target.files[0];\n    if (file) {\n      setImageFile(URL.createObjectURL(file)); // Display image preview before upload\n      setLoading(true); // Set loading to true\n\n      const formData = new FormData();\n      formData.append('profileImage', file); // 'profileImage' should match your backend field\n      formData.append('userId', user._id); // Assuming the user's ID is available in the user object\n\n      try {\n        // Send POST request to upload the image\n        const response = await axios.post('http://localhost:5000/api/user/uploadProfileImage', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n\n        // Update the user profile image in the state after successful upload\n        setUser(prevUser => ({\n          ...prevUser,\n          profileImage: response.data.profileImage // Make sure the backend returns this\n        }));\n        setError(null); // Clear any previous errors\n      } catch (error) {\n        console.error('Image upload failed:', error);\n        setError('Image upload failed. Please try again.'); // Set error message\n      } finally {\n        setLoading(false); // Reset loading state\n      }\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"profile-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }, \"User Profile\"), user ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"profile-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }, \"Name: \", user.firstName, \" \", user.lastName), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"profile-email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, \"Email: \", user.email)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-image1-section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: user.profileImage || imageFile || defaultProfileImage,\n    alt: \"Profile\",\n    className: \"profile-image1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit-overlay\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"image-upload\",\n    className: \"edit-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 15\n    }\n  }, \"Edit Profile\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    id: \"image-upload\",\n    accept: \"image/*\",\n    onChange: handleImageChange,\n    className: \"file-input\",\n    style: {\n      display: 'none'\n    } // Hide the input\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 15\n    }\n  }))), loading && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 23\n    }\n  }, \"Uploading image...\"), \" \", error && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error-message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 21\n    }\n  }, error), \" \") : /*#__PURE__*/React.createElement(\"p\", {\n    className: \"profile-login-message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, \"Please log in to see your profile.\"));\n};\nexport default Profile;","map":{"version":3,"names":["React","useState","axios","Profile","user","setUser","imageFile","setImageFile","loading","setLoading","error","setError","defaultProfileImage","handleImageChange","e","file","target","files","URL","createObjectURL","formData","FormData","append","_id","response","post","headers","prevUser","profileImage","data","console","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","firstName","lastName","email","src","alt","htmlFor","type","id","accept","onChange","style","display"],"sources":["D:/project/miniproject/fullstack/src/component/profile/profile.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport './profile.css'; // Import CSS file for styling\r\nimport axios from 'axios'; // To handle image upload requests\r\n\r\nconst Profile = ({ user, setUser }) => {\r\n  const [imageFile, setImageFile] = useState(null); // State to store selected image preview\r\n  const [loading, setLoading] = useState(false); // State to handle loading status\r\n  const [error, setError] = useState(null); // State to handle error messages\r\n  const defaultProfileImage = 'https://www.pphfoundation.ca/wp-content/uploads/2018/05/default-avatar.png';\r\n\r\n  // Function to handle image selection and upload\r\n  const handleImageChange = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setImageFile(URL.createObjectURL(file)); // Display image preview before upload\r\n      setLoading(true); // Set loading to true\r\n\r\n      const formData = new FormData();\r\n      formData.append('profileImage', file); // 'profileImage' should match your backend field\r\n      formData.append('userId', user._id); // Assuming the user's ID is available in the user object\r\n\r\n      try {\r\n        // Send POST request to upload the image\r\n        const response = await axios.post('http://localhost:5000/api/user/uploadProfileImage', formData, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data',\r\n          },\r\n        });\r\n\r\n        // Update the user profile image in the state after successful upload\r\n        setUser((prevUser) => ({\r\n          ...prevUser,\r\n          profileImage: response.data.profileImage, // Make sure the backend returns this\r\n        }));\r\n        setError(null); // Clear any previous errors\r\n      } catch (error) {\r\n        console.error('Image upload failed:', error);\r\n        setError('Image upload failed. Please try again.'); // Set error message\r\n      } finally {\r\n        setLoading(false); // Reset loading state\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"profile-container\">\r\n      <h1 className=\"profile-title\">User Profile</h1>\r\n      {user ? (\r\n        <div className=\"profile-info\">\r\n          <div className=\"profile-details\">\r\n            <p className=\"profile-name\">Name: {user.firstName} {user.lastName}</p>\r\n            <p className=\"profile-email\">Email: {user.email}</p>\r\n          </div>\r\n          <div className=\"profile-image1-section\">\r\n            <img\r\n              src={user.profileImage || imageFile || defaultProfileImage}\r\n              alt=\"Profile\"\r\n              className=\"profile-image1\"\r\n            />\r\n            <div className=\"edit-overlay\">\r\n              <label htmlFor=\"image-upload\" className=\"edit-button\">\r\n                Edit Profile\r\n              </label>\r\n              <input\r\n                type=\"file\"\r\n                id=\"image-upload\"\r\n                accept=\"image/*\"\r\n                onChange={handleImageChange}\r\n                className=\"file-input\"\r\n                style={{ display: 'none' }} // Hide the input\r\n              />\r\n            </div>\r\n          </div>\r\n          {loading && <p>Uploading image...</p>} {/* Loading message */}\r\n          {error && <p className=\"error-message\">{error}</p>} {/* Error message */}\r\n        </div>\r\n      ) : (\r\n        <p className=\"profile-login-message\">Please log in to see your profile.</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}