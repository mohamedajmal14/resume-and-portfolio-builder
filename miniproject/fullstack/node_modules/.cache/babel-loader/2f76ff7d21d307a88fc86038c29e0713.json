{"ast":null,"code":"var _jsxFileName = \"D:\\\\project\\\\miniproject\\\\fullstack\\\\src\\\\App.js\";\nimport React, { useEffect, useState } from 'react';\nimport './App.css';\nimport Auth from './component/Auth/Auth';\nimport { BrowserRouter as Router, Routes, Route, useNavigate } from 'react-router-dom';\nimport Home from './component/home/home';\nimport Navbar from './component/navbar/Navbar'; // Import Navbar\nimport Profile from './component/profile/profile';\nimport axios from 'axios';\nfunction App() {\n  const [user, setUser] = useState(null); // State to track user\n  const navigate = useNavigate();\n  useEffect(() => {\n    // Check for token in localStorage on component mount\n    const token = localStorage.getItem('token');\n    if (token) {\n      // Validate the token and fetch user profile\n      axios.get('http://localhost:5000/api/user/profile', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(response => {\n        setUser(response.data.user); // Set user in state\n        navigate('/home'); // Redirect to home or profile page\n      }).catch(error => {\n        console.error('Error fetching user profile:', error);\n        localStorage.removeItem('token'); // Remove invalid token\n        navigate('/login'); // Redirect to login page\n      });\n    }\n  }, [navigate]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    user: user,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }\n  }), \" \", /*#__PURE__*/React.createElement(Routes, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    path: \"/login\",\n    element: /*#__PURE__*/React.createElement(Auth, {\n      setUser: setUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 39\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/home\",\n    element: /*#__PURE__*/React.createElement(Home, {\n      user: user,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 38\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/\",\n    element: /*#__PURE__*/React.createElement(Home, {\n      user: user,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 34\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/profile\",\n    element: /*#__PURE__*/React.createElement(Profile, {\n      user: user,\n      setUser: setUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 41\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  })));\n}\nexport default App;","map":{"version":3,"names":["React","useEffect","useState","Auth","BrowserRouter","Router","Routes","Route","useNavigate","Home","Navbar","Profile","axios","App","user","setUser","navigate","token","localStorage","getItem","get","headers","Authorization","then","response","data","catch","error","console","removeItem","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","path","element"],"sources":["D:/project/miniproject/fullstack/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './App.css';\nimport Auth from './component/Auth/Auth';\nimport { BrowserRouter as Router, Routes, Route, useNavigate } from 'react-router-dom';\nimport Home from './component/home/home';\nimport Navbar from './component/navbar/Navbar'; // Import Navbar\nimport Profile from './component/profile/profile';\nimport axios from 'axios';\n\nfunction App() {\n  const [user, setUser] = useState(null); // State to track user\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // Check for token in localStorage on component mount\n    const token = localStorage.getItem('token');\n\n    if (token) {\n      // Validate the token and fetch user profile\n      axios\n        .get('http://localhost:5000/api/user/profile', {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        })\n        .then((response) => {\n          setUser(response.data.user); // Set user in state\n          navigate('/home'); // Redirect to home or profile page\n        })\n        .catch((error) => {\n          console.error('Error fetching user profile:', error);\n          localStorage.removeItem('token'); // Remove invalid token\n          navigate('/login'); // Redirect to login page\n        });\n    }\n  }, [navigate]);\n\n  return (\n    <div className=\"App\">\n      <Navbar user={user} /> {/* Pass user state to Navbar */}\n      <Routes>\n        <Route path='/login' element={<Auth setUser={setUser} />} />\n        <Route path='/home' element={<Home user={user} />} />\n        <Route path='/' element={<Home user={user} />} />\n        <Route path='/profile' element={<Profile user={user} setUser={setUser} />} />\n      </Routes>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}